<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>WebUSB Example</title>
</head>

<body>
  <button onclick="connectToDevice()">Connect to USB Device</button>

  <script>
    let device;

    async function connectToDevice() {
      try {
        device = await navigator.usb.requestDevice({ filters: [{}] });

        await device.open();
        await device.selectConfiguration(1);
        await device.claimInterface(2);
        
        await device.controlTransferOut({
          requestType: 'class',
          recipient: 'interface',
          request: 0x22,
          value: 0x01,
          index: 0x02
        });

        const result = await device.transferIn(5, 64);
        const decoder = new TextDecoder();
        console.log('Received: ' + decoder.decode(result.data));
      } catch (error) {
        console.error(error);
      }
    }
  </script>
</body>

</html>
